<!-- File: readme.html
  Copyright (c) 2017-2021 Splunk Inc.

  Licensed under Apache 2.0 (https://www.apache.org/licenses/LICENSE-2.0.txt)
-->

<html>
<head></head>
<body>
<h2>Asset Configuration</h2>
There are two ways to configure an AWS Athena asset. The first is to configure the <b>access_key</b>, <b>secret_key</b> and <b>region</b> variables. If it is preferred to use a role and Phantom is running as an EC2 instance, the <b>use_role</b> checkbox can be checked instead. This will allow the role that is attached to the instance to be used. Please see the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">AWS EC2 and IAM documentation</a> for more information.

This app also requires some integration with AWS S3. Query results will be stored in a folder on S3 specified during a query action. These results can be encrypted using various encryption schemes, some of which require a KMS key. This KMS key should be provided when configuring the asset and must be applicable for the given region.

<h2>Assumed Role Credentials</h2>
The optional <b>credentials</b> action parameter consists of temporary <b>assumed role</b> credentials that will be used to perform the action instead of those that are configured in the <b>asset</b>. The parameter is not designed to be configured manually, but should instead be used in conjunction with the Phantom AWS Security Token Service app. The output of the <b>assume_role</b> action of the STS app with data path <b>assume_role_&lt;number&gt;:action_result.data.*.Credentials</b> consists of a dictionary containing the <b>AccessKeyId</b>, <b>SecretAccessKey</b>, <b>SessionToken</b> and <b>Expiration</b> key/value pairs. This dictionary can be passed directly into the credentials parameter in any of the following actions within a playbook. For more information, please see the <a href=https://docs.aws.amazon.com/iam/index.html>AWS Identity and Access Management documentation</a>.
</body>
</html>
